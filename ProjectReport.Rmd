---
title: "Untitled"
output:
  html_document:
    toc: true
    fig_caption: true
---

## Synopsis

## Data Processing

```{r cache=TRUE}

# checking if data directory exists, if not, creating one
if(!file.exists("./data")) { dir.create("./data") }

# location of data to download
fileURL <- "https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2"

# name of file
fileName <- "data/repdata-data-StormData.csv.bz2"

# downloading the file and placing it in the data directory if it doesn't already exist
if(!file.exists(fileName) { download.file(fileURL, fileName, method="curl")}

# reading the data into R
data <- read.csv(fileName)

# let's use dplyr
library(dplyr)
data <- tbl_df(data)

```

Because many of the event types are inconsistently recorded (ex. THUNDERSTORM WIND and THUNDERSTORM WINDS) I'm going to use two processes to clean up the data:

* converting all events to lowercase, which removes capitalization errors
* approximate string matching using the generalized Levenshtein distance.

```{r}

# step 1: converting all EVTYPES to lower case
tidydata <- data %>% mutate(EVTYPE = tolower(EVTYPE))

# step 2: String matching with Levenshtein distance

```



```{r}

combineevents <- function(x,l) {
  
  for(i in l) {
    matches <- agrep(x,l)
    if(matches > 1) {
      rep <- matches[1]      
      for (x in matches)
        replace(l[x],values=rep)
    }  
  }
  l
  }



```

## Results

### Which Events are Most Harmful to Population Health?

To answer this question we will look at Event Types that result in direct fatalities or injuries.

### Which Events have the Greatest Economic Consequence?

